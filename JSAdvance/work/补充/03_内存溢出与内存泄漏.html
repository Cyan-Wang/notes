<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 
        1.内存溢出
            *一种程序运行出现的错误
            *当程序运行需要的内存超过了剩余的内存时，就会抛出内存溢出的错误
        2.内存泄漏
            *占用的内存没有及时释放
            *内存泄漏积累多了就容易导致内存溢出
            *常见的内存泄漏：
                *意外的全局变量
                *没有及时清理的计时器或回调函数
                *闭包
     -->

     <script>
         //1.内存溢出
        //  var obj = {};
        //  for(let i = 0;i < 1000;i++){
        //      setTimeout(function(){
        //         obj[i] = new Array(1000000);
        //         console.log(i);
        //      },2000)
        //  }

        // 2.内存泄漏——意外的全局变量
        // 如果在函数中没有用var声明a，会根据作用域链来查找这个变量，
        // 如果一直找到全局作用域仍没有这个变量的声明语句，那么久自动在全局作用域进行声明
        // function fn(){
        //     a = 3;
        //     console.log(a);
        // }
        // fn();
        // console.log(a);

        // 启动循环定时器后不清理
        // var intervalId = setInterval(() => {
        //     console.log('-----------');
        // }, 1000);

        // clearInterval(intervalId);

        // 闭包
        function fn1(){
            var a = 4;
            function fn2(){
                console.log(++a);
            }
            return fn2;
        }
        var f = fn1();
        f();
        f = null;
     </script>
</body>
</html>